import { motion, useAnimation } from 'framer-motion'
import Link from 'next/link'
import { useRouter } from 'next/router'
import { useEffect, useState } from 'react'
import { useAudioStore } from '~/store/audio'

export default function Record() {
  const { globalAudioState, setGlobalAudioState } = useAudioStore()
  const [spin, setSpin] = useState(0)

  useEffect(() => {
    if (globalAudioState === 'playing') {
      let intervalId = setInterval(() => {
        setSpin((prev) => prev + 5)
      }, 100)
      return () => clearInterval(intervalId)
    }
  }, [globalAudioState])

  return (
    <button
      aria-label="Stop the audio playing"
      onClick={() => setGlobalAudioState('paused')}
      className="sticky left-5 top-5 z-40"
    >
      <div>
        <svg
          className="transition-transform"
          style={{ transform: `rotate(${spin}deg)` }}
          width="57"
          height="57"
          viewBox="0 0 57 57"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M50.6496 11.0072C49.4264 9.65429 47.9691 8.54801 46.517 7.47226C43.6737 5.3055 40.6143 3.03955 37.1455 1.9816C32.5144 0.351437 28.3462 -0.317412 23.532 1.07878C21.7721 1.54926 20.1038 2.10113 18.3516 2.57924C16.6197 3.07261 14.8191 3.6143 13.1051 4.56798C9.77608 6.46009 7.63729 9.71786 5.44255 12.7366C3.86071 15.0966 2.81801 17.6932 1.94826 20.3457C1.03526 22.9855 0.00528791 25.7016 0.00020161 28.5779C-0.0125141 31.4567 0.577497 34.2135 1.42182 36.9118C2.21529 39.6202 3.6954 42.1787 5.31285 44.4115C7.49487 47.4175 9.88798 50.3956 13.1483 52.3843C15.6355 53.8619 18.2371 54.5867 20.9151 55.4005C23.5752 56.1838 26.3295 56.7484 29.1345 56.6721C31.9168 56.606 34.6405 56.0388 37.2548 55.1487C39.8336 54.2357 42.4378 53.4652 44.7876 51.9596C47.1019 50.4159 48.9559 48.4094 50.6394 46.2477C52.9079 43.4121 54.4414 40.0577 55.4765 36.599C56.2725 34.0151 56.9236 31.355 56.9185 28.6287C56.921 23.4534 54.1439 14.855 50.6471 11.0072H50.6496ZM55.0238 36.4566C54.2202 38.9946 53.1572 41.4742 51.677 43.6817C50.1715 45.8535 48.432 47.9135 46.3975 49.6047C43.7246 51.9698 40.2354 52.9133 36.8632 53.8924C32.6924 55.1208 28.2495 55.4158 24.0406 54.2027C22.3545 53.7449 20.6709 53.1396 19.023 52.5496C17.3725 51.9444 15.7906 51.2704 14.4072 50.3651C11.5461 48.4602 9.43784 45.7111 7.49741 42.878C6.51576 41.4335 5.61294 39.9763 4.93646 38.4478C4.25235 36.8965 3.7895 35.2282 3.39785 33.5904C3.01892 31.9247 2.78241 30.2436 2.78241 28.5855C2.77987 26.1492 3.72846 23.5908 4.51938 21.1977C4.7559 20.4703 5.09413 19.4073 5.35862 18.7028C6.10885 16.6556 7.01676 14.7915 8.28579 13.0545C9.0233 12.0245 9.83457 10.8165 10.6128 9.85011C13.6671 5.748 16.9427 5.21394 21.5 3.62447C23.9465 2.7598 26.4897 1.89513 29.0633 1.84172C31.6523 1.78069 34.2793 2.37579 36.7793 3.1133C39.3402 3.81775 41.6341 5.09441 43.8365 6.59233C45.2963 7.61213 46.8095 8.60651 48.1929 9.69752C51.7813 12.3399 53.7217 16.6149 55.0543 20.7907C55.8707 23.3237 56.4836 25.961 56.4938 28.6262C56.4861 31.2914 55.8453 33.9236 55.0213 36.454L55.0238 36.4566Z"
            fill="#EEEAB8"
          />
          <path
            d="M41.4255 24.6133C40.9982 23.2985 40.3803 22.0777 39.5843 20.9867C38.6916 19.7584 37.7608 18.8022 36.7436 18.0621C35.8204 17.3907 34.5768 16.5591 33.1399 16.0937C31.9446 15.7046 30.5739 15.5088 29.0658 15.5088C27.5577 15.5088 26.2887 15.8801 25.0527 16.2819L24.6254 16.4192C23.4759 16.7855 22.2857 17.1644 21.271 17.9019C20.091 18.7615 19.0636 19.766 18.3057 20.8113C17.4639 21.9709 16.9909 23.4205 16.6145 24.5853C16.2305 25.7729 16.2356 27.0115 16.2407 28.2118V28.6314C16.2407 30.1726 16.4212 31.4391 16.8027 32.6166C16.8612 32.7971 16.9171 32.9777 16.9756 33.1583C17.324 34.262 17.6826 35.4039 18.3973 36.3855C19.0992 37.3494 20.0427 38.0157 20.9557 38.6591C21.1388 38.7888 21.3193 38.916 21.4999 39.0482C22.7638 39.9663 23.8956 40.5715 25.0654 40.9505C26.5582 41.4362 27.8324 41.6626 29.0683 41.6626C30.6985 41.6626 31.9879 41.4896 33.1272 41.1209C34.1343 40.7928 35.6169 40.2537 36.858 39.3508C37.9592 38.5472 38.801 37.4536 39.6351 36.3067C40.3065 35.3835 41.1381 34.1374 41.6061 32.703C41.9596 31.612 41.9392 30.4752 41.9214 29.3766C41.9163 29.1299 41.9138 28.8807 41.9138 28.6289C41.9138 27.1157 41.8324 25.8518 41.428 24.6133H41.4255ZM40.1514 32.23C39.7521 33.4609 39.0044 34.5748 38.3991 35.4089C37.6108 36.4923 36.8834 37.4435 35.9577 38.1174C35.1465 38.7074 34.0961 39.2008 32.6516 39.6687C31.67 39.9866 30.5306 40.1367 29.0632 40.1367C27.99 40.1367 26.8685 39.9332 25.5308 39.5009C24.5034 39.1677 23.537 38.6489 22.3925 37.8148C22.2069 37.68 22.0187 37.5477 21.8305 37.413C20.9811 36.8128 20.1775 36.2456 19.6256 35.4878C19.0585 34.707 18.7508 33.7305 18.4252 32.7005C18.3667 32.5148 18.3082 32.3292 18.2498 32.1461C17.9191 31.1237 17.764 30.0073 17.764 28.6314V28.2042C17.7589 27.075 17.7538 26.0095 18.0641 25.0558C18.4278 23.9393 18.8372 22.6728 19.5391 21.709C20.2054 20.7935 21.1159 19.9034 22.1688 19.1353C22.9826 18.5428 24.0049 18.2172 25.0883 17.8714L25.5232 17.7315C26.8125 17.3119 27.9086 17.0347 29.0632 17.0347C30.4086 17.0347 31.6216 17.2076 32.6643 17.5459C33.8978 17.9477 35.0117 18.6928 35.8433 19.2981C36.7308 19.944 37.5497 20.7909 38.3483 21.887C39.0476 22.8483 39.5944 23.9266 39.9708 25.0863C40.3116 26.1341 40.3803 27.2607 40.3803 28.6314C40.3803 28.8909 40.3853 29.1477 40.3904 29.4046C40.4082 30.4244 40.4235 31.3857 40.1488 32.2326L40.1514 32.23Z"
            fill="#EEEAB8"
          />
          <path
            d="M37.0972 26.0068C36.8251 25.1701 36.4207 24.3817 35.8968 23.662C35.3501 22.9093 34.7423 22.2964 34.0429 21.7877C33.3308 21.2689 32.5348 20.8671 31.6778 20.5874C30.7826 20.2974 29.9281 20.155 29.0659 20.155H28.9006C28.2114 20.155 27.3798 20.1957 26.4287 20.506C25.3657 20.8519 24.5697 21.3808 24.0636 21.7496C23.3769 22.248 22.7691 22.8686 22.2071 23.6417C21.9197 24.0359 21.322 24.8573 20.9533 25.9941C20.5998 27.0826 20.6049 28.0286 20.6074 28.5373V28.6797C20.6074 29.1985 20.6074 30.1674 20.9635 31.2635C21.2305 32.0875 21.6425 32.8835 22.1893 33.6337C22.8454 34.534 23.5829 35.1215 24.0839 35.4851C24.6409 35.8895 25.4089 36.3981 26.4363 36.7313C27.2603 36.9983 28.1453 37.1357 29.0685 37.1357C29.9916 37.1357 30.8894 37.0085 31.7032 36.744C32.8095 36.3854 33.5826 35.8183 33.9997 35.5157L34.048 35.4801C34.7779 34.9485 35.4086 34.3229 35.9197 33.6185C36.4207 32.9318 36.8073 32.1587 37.0998 31.2559L37.1252 31.1847C37.2829 30.7422 37.6109 29.8215 37.6109 28.6339C37.6109 27.4462 37.2803 26.5231 37.1226 26.0806L37.0972 26.0119V26.0068ZM32.0211 29.5901C31.9168 29.908 31.7897 30.2056 31.5989 30.4701C31.4056 30.7371 31.1691 30.9634 30.9021 31.1567C30.6376 31.35 30.368 31.556 30.0501 31.6602C29.745 31.7594 29.4042 31.7925 29.0659 31.7925C28.7277 31.7925 28.392 31.7493 28.0843 31.6501C27.7664 31.5458 27.4866 31.3576 27.2247 31.1643C26.9577 30.9711 26.7008 30.7549 26.5075 30.4879C26.3143 30.2234 26.1464 29.9284 26.0421 29.6105C25.943 29.3053 25.948 28.967 25.948 28.6288C25.948 28.2906 25.9328 27.9498 26.032 27.6421C26.1362 27.3242 26.3321 27.0444 26.5253 26.7825C26.7186 26.5155 26.9399 26.2611 27.2044 26.0679C27.4688 25.8746 27.7588 25.6889 28.0767 25.5847C28.3335 25.5007 28.6158 25.4956 28.9006 25.4956C28.9566 25.4956 29.0125 25.4956 29.0659 25.4956C29.4042 25.4956 29.7221 25.5669 30.0298 25.666C30.3477 25.7703 30.6376 25.9127 30.9021 26.106C31.1691 26.2993 31.3853 26.5383 31.5811 26.8054C31.7744 27.0699 31.9219 27.3521 32.0236 27.67C32.1228 27.9752 32.2703 28.2906 32.2703 28.6314C32.2703 28.9721 32.1228 29.2849 32.0236 29.5927L32.0211 29.5901Z"
            fill="#EEEAB8"
          />
          <path
            d="M28.9947 7.30423C30.8944 7.33729 32.7941 7.20759 34.6532 7.55346C36.4843 7.90187 38.2212 8.764 40.0269 9.40742C39.1902 8.93694 38.3611 8.46391 37.5015 8.02649C36.6394 7.59924 35.7417 7.21014 34.7829 6.97362C32.8933 6.49042 30.9249 6.59215 29.0099 6.54383C27.0949 6.51331 25.124 6.34546 23.2217 6.78034C21.3372 7.20251 19.4985 7.83575 17.7896 8.71314C19.6155 8.12821 21.4644 7.6679 23.3336 7.36273C25.2028 7.06263 27.0924 7.25846 28.9921 7.30423H28.9947Z"
            fill="#EEEAB8"
          />
          <path
            d="M25.5843 11.9277C29.1626 11.5055 32.8654 11.7547 36.2478 13.0924C38.5061 13.9546 40.6245 15.1905 42.4887 16.7927C39.1622 13.123 34.1522 11.0223 29.2058 10.9893C26.7313 10.9765 24.1805 11.208 21.8739 12.1922C19.6079 13.1433 17.3954 14.3996 15.7017 16.2002C17.6039 14.6438 19.8165 13.5807 22.0901 12.744C23.2167 12.3346 24.3891 12.065 25.5843 11.9277Z"
            fill="#EEEAB8"
          />
          <path
            d="M29.4929 50.2177C27.5932 50.1846 25.6934 50.3143 23.8344 49.9685C22.0033 49.62 20.2663 48.7579 18.4607 48.1145C19.2974 48.585 20.1265 49.058 20.986 49.4954C21.8482 49.9227 22.7459 50.3118 23.7047 50.5483C25.5942 51.0315 27.5626 50.9298 29.4776 50.9781C31.3926 51.0086 33.3636 51.1765 35.2658 50.7416C37.1503 50.3194 38.989 49.6862 40.698 48.8088C38.872 49.3937 37.0232 49.854 35.1539 50.1592C33.2847 50.4593 31.3952 50.2635 29.4954 50.2177H29.4929Z"
            fill="#EEEAB8"
          />
          <path
            d="M32.906 45.5943C29.3278 46.0165 25.625 45.7672 22.2426 44.4295C19.9843 43.5674 17.8658 42.3314 16.0017 40.7292C19.3282 44.399 24.3382 46.4997 29.2846 46.5327C31.7591 46.5454 34.3099 46.314 36.6165 45.3298C38.8824 44.3787 41.095 43.1224 42.7887 41.3218C40.8864 42.8782 38.6739 43.9412 36.4003 44.7779C35.2737 45.1874 34.1013 45.457 32.906 45.5943Z"
            fill="#EEEAB8"
          />
        </svg>
      </div>
    </button>
  )
}
